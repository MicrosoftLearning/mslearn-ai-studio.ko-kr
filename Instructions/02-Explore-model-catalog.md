---
lab:
  title: 언어 모델 선택 및 배포
  description: 생성형 AI 애플리케이션은 하나 이상의 언어 모델을 기반으로 구축됩니다. 생성형 AI 프로젝트에 적합한 모델을 찾고 선택하는 방법을 알아봅니다.
---

# 언어 모델 선택 및 배포

Azure AI Foundry의 모델 카탈로그는 다양한 모델을 탐색하고 사용할 수 있는 중앙 리포지토리 역할을 하므로 생성형 AI 시나리오를 쉽게 만들 수 있습니다.

이 연습에서는 Azure AI 파운드리 포털의 모델 카탈로그를 살펴보고 문제 해결을 지원하는 생성형 AI 애플리케이션의 잠재 모델을 비교합니다.

이 연습은 약 **25**분 정도 소요됩니다.

> **참고**: 이 연습에 사용된 일부 기술은 미리 보기이거나 현재 개발 중에 있습니다. 예기치 않은 동작, 경고 또는 오류가 발생할 수 있습니다.

## Azure AI 허브 및 프로젝트 만들기

Azure AI 허브는 하나 이상의 *프로젝트*를 정의할 수 있는 공동 작업 영역을 제공합니다. 프로젝트와 Azure AI 허브를 만들어 보겠습니다.

1. 웹 브라우저에서 [Azure AI 파운드리 포털](https://ai.azure.com)(`https://ai.azure.com`)을 열고 Azure 자격 증명을 사용하여 로그인합니다. 처음 로그인할 때 열리는 팁이나 빠른 시작 창을 닫고, 필요한 경우 왼쪽 위에 있는 **Azure AI 파운드리** 로고를 사용하여 다음 이미지와 유사한 홈페이지로 이동합니다(**도움말** 창이 열려 있는 경우 닫습니다).

    ![Azure AI Foundry 포털의 스크린샷.](./media/ai-foundry-home.png)

1. 홈페이지에서 **+ 프로젝트 만들기**를 선택합니다.
1. **프로젝트 만들기** 마법사에서 유효한 프로젝트 이름을 입력하고 기존 허브가 추천되면 새 허브를 만드는 옵션을 선택합니다. 그런 다음 허브 및 프로젝트를 지원하기 위해 자동으로 만들어지는 Azure 리소스를 검토합니다.
1. **사용자 지정**을 선택하고 허브에 대해 다음 설정을 지정합니다.
    - **허브 이름**: *허브에서 유효한 이름*
    - **구독**: ‘Azure 구독’
    - **리소스 그룹**: ‘리소스 그룹 만들기 또는 선택’
    - **위치**: **선택 도움말**을 선택한 다음 위치 도우미 창에서 **gpt-4o**를 선택하고 권장되는 지역을 사용합니다.\*
    - **Azure AI 서비스 또는 Azure OpenAI 연결**: *새 AI 서비스 리소스 만들기*
    - **Azure AI 검색 연결**: 연결 건너뛰기

    > \*Azure OpenAI 리소스는 지역 모델 할당량에 의해 제약을 받습니다. 연습 후반부에 할당량 한도를 초과하는 경우 다른 지역에서 다른 리소스를 만들어야 할 수도 있습니다.

1. **다음**을 선택하여 구성을 검토합니다. **만들기**를 선택하고 프로세스가 완료될 때까지 기다립니다.
1. 프로젝트를 만들 때 표시되는 팁을 모두 닫고 Azure AI 파운드리 포털에서 프로젝트 페이지를 검토합니다. 이 페이지는 다음 이미지와 유사합니다.

    ![Azure AI 파운드리 포털의 Azure AI 프로젝트 세부 정보 스크린샷.](./media/ai-foundry-project.png)

## Azure AI 유추 서비스 배포 구성

Azure AI 파운드리 포털에는 모델을 배포하기 위한 여러 옵션이 있습니다. 이 연습에서는 Azure AI 파운드리 모델 카탈로그의 *Azure OpenAI* 모델과 *Model as a service* 모델을 모두 지원하는 **Azure AI 모델 추론** 배포 옵션을 사용하게 됩니다. 모든 모델이 Azure AI 서비스 리소스에서 호스팅하는 공통 엔드포인트에 배포되므로 동작 및 성능을 비교하기 위해 테스트할 때 모델 간에 쉽게 전환할 수 있습니다.

1. Azure AI 파운드리 프로젝트 페이지의 오른쪽 상단에 있는 도구 모음에서 **기능 미리 보기** 아이콘(**&#9215;**)을 사용하여 미리 보기 기능을 표시합니다.
1. **Azure AI 모델 추론 서비스에 모델 배포** 기능이 사용하도록 설정되어 있는지 확인합니다. 그런 다음 **기능 미리보기** 창을 닫습니다.

## 모델 세부 정보 및 벤치마크 검토

모델을 선택하는 데 도움이 되도록 모델 설명 및 벤치마크를 탐색하여 요구 사항에 가장 적합한 모델을 결정할 수 있습니다.

1. Azure AI 파운드리 프로젝트 포털의 왼쪽 탐색 창에서 **모델 카탈로그**를 선택합니다.
1. 모델 카탈로그 홈페이지에서 `gpt-4o`을(를) 검색하여 **gpt-4o** 채팅 완료 모델을 찾습니다.

    ![모델 카탈로그에서 "gpt-4o"를 검색하는 스크린샷.](./media/model-catalog-search-gpt4.png)

1. **GPT-4o** 모델을 선택하고 세부 정보를 확인합니다. 설명을 읽고 페이지에서 제공되는 다른 정보를 검토합니다.

    ![gpt-4o 모델 세부 정보 페이지의 스크린샷.](./media/gpt4-details.png)

1. **gpt-4o** 페이지의 **벤치마크** 탭에서 몇 가지 표준 성능 벤치마크에서 모델이 유사한 시나리오에 사용되는 다른 모델과 어떻게 비교되는지 확인합니다.

    ![gpt-4o 모델 벤치마크 페이지의 스크린샷.](./media/gpt4-benchmarks.png)

1. 모델 카탈로그 홈페이지로 돌아가려면 **gpt-4o** 페이지 제목 옆의 뒤로 화살표(**&larr;**)를 사용합니다.
1. 모델 카탈로그에서 `Phi-3.5-mini-instruct`을(를) 검색하여 **Phi-3.5-mini-instruct** 모델에 대한 세부 정보와 벤치마크를 확인합니다.

## 모델 비교

생성형 AI 채팅 애플리케이션을 구현하는 데 사용할 수 있는 두 가지 모델을 검토해 보았습니다. 이제 이 두 모델의 메트릭을 시각적으로 비교해 보겠습니다.

1. **모델 카탈로그** 홈 페이지로 돌아갑니다.
1. **모델 비교**를 선택합니다. 모델 비교를 위한 시각적 차트가 몇 가지 일반적인 모델과 함께 표시됩니다.

    ![모델 비교 페이지의 스크린샷.](./media/compare-models.png)

1. 왼쪽의 **비교할 모델** 창에서 *질문 답변*과 같이 인기 있는 작업을 선택하면 특정 작업에 일반적으로 사용되는 모델을 자동으로 선택할 수 있습니다.
1. **모든 모델 지우기**(&#128465;) 아이콘을 사용하여 미리 선택한 모델을 모두 제거합니다.
1. **+ 비교할 모델** 단추를 사용하여 **gpt-4o** 모델을 목록에 추가합니다. 그런 다음 같은 버튼을 사용하여 **Phi-3.5-mini-instruct** 모델을 목록에 추가합니다.
1. **품질 지수**(모델 품질을 나타내는 표준화된 점수)와 **비용**을 기준으로 모델을 비교한 차트를 검토합니다. 차트에서 모델을 나타내는 지점 위에 마우스를 올려놓으면 모델의 특정 값을 볼 수 있습니다.

    ![gpt-4o 및 Phi-3.5-mini-instruct의 모델 비교 차트 스크린샷.](./media/comparison-chart.png)

1. **X축** 드롭다운 메뉴에서 **품질** 아래에 있는 다음 메트릭을 선택하고 다음으로 전환하기 전에 각 결과 차트를 관찰합니다.
    - 정확도(Accuracy)
    - 일관성
    - 유창성
    - 정확도

## 모델 배포

이제 모델 벤치마크를 통해 옵션을 살펴보셨으므로 언어 모델을 배포할 준비가 되었습니다. 모델 카탈로그를 찾아보고 카탈로그에서 배포하거나, **배포** 페이지를 통해 모델을 배포할 수 있습니다. 두 옵션을 모두 살펴보겠습니다.

### *모델 카탈로그*에서 모델을 배포합니다.

먼저 모델 카탈로그에서 모델을 배포해 보겠습니다. 사용 가능한 여러 모델을 검토하려는 경우 이 옵션을 선호할 수 있습니다.

1. **모델 카탈로그** 홈 페이지로 돌아갑니다.
1. 이전과 마찬가지로 `gpt-4o` 모델을 검색하여 선택합니다.
1. **gpt-4o** 페이지에서 **배포**를 선택하고 배포 세부 정보에서 **사용자 지정**을 선택하여 다음 설정으로 모델을 배포합니다.
1. 배포 세부 정보에서 **사용자 지정**을 선택하여 다음 설정으로 모델을 배포합니다.
    - **배포 이름**: *모델 배포에 대한 유효한 이름*
    - **배포 유형**: 글로벌 표준
    - **자동 버전 업데이트**: 사용
    - **모델 버전**: *사용 가능한 최신 버전 선택*
    - **연결된 AI 리소스**: *Azure OpenAI 리소스 연결 선택*
    - **분당 토큰 속도 제한(천 단위)**: 50K *(또는 50K 이하인 경우 구독에서 사용 가능한 최대치)*
    - **콘텐츠 필터**: DefaultV2

    > **참고**: TPM을 줄이면 사용 중인 구독에서 사용 가능한 할당량을 과도하게 사용하지 않을 수 있습니다. 이 연습에 사용되는 데이터는 50,000TPM이면 충분합니다. 사용 가능한 할당량이 이 수치 이하이면 연습을 완료할 수 있지만 속도 제한을 초과하는 경우 기다린 다음 프롬프트를 다시 제출해야 할 수 있습니다.

1. 배포가 완료될 때가지 기다립니다.

### *모델 + 엔드포인트*를 통해 모델을 배포합니다.

배포하려는 모델을 정확히 알고 있는 경우 **모델 + 엔드포인트**를 통해 배포를 수행하는 것이 좋습니다.

1. 왼쪽 탐색 표시줄의 **내 자산** 섹션에서 **모델 + 엔드포인트**를 선택합니다.
1. **모델 배포** 탭의 **+ 모델 배포** 드롭다운 목록에서 **베이스 모델 배포**를 선택합니다. 그런 다음 `Phi-3.5-mini-instruct`을(를) 검색하고 선택을 확인합니다.
1. 모델 라이선스에 동의합니다.
1. 다음 설정으로 **Phi-3.5-mini-instruct** 모델을 배포합니다.
    - **배포 이름**: *모델 배포에 대한 유효한 이름*
    - **배포 유형**: 글로벌 표준
    - **배포 세부 정보**: *기본 설정 사용*

1. 배포가 완료될 때가지 기다립니다.

## 채팅 플레이그라운드에서 모델 테스트

이제 비교할 두 가지 모델이 있으므로 대화형 상호 작용에서 모델이 어떻게 동작하는지 살펴보겠습니다.

### 채팅 준비

1. 탐색 모음에서 **플레이그라운드**를 선택합니다. 그런 다음 **채팅 플레이그라운드**를 선택합니다.
1. **설정** 창의 **모델 지침 및 컨텍스트 제공** 필드에서 시스템 프롬프트를 `You are an AI assistant that helps solve problems.`(으)로 설정합니다.
1. **변경 내용 적용**을 선택합니다.

### *gpt-4o* 모델과 채팅

**설정** 창에서 *gpt-4* 모델을 선택합니다.
1. 채팅창에 다음 쿼리를 입력합니다.

    ```
    I have a fox, a chicken, and a bag of grain that I need to take over a river in a boat. I can only take one thing at a time. If I leave the chicken and the grain unattended, the chicken will eat the grain. If I leave the fox and the chicken unattended, the fox will eat the chicken. How can I get all three things across the river without anything being eaten?
    ```

1. 응답을 봅니다. 그런 다음 다음의 후속 쿼리를 입력합니다.

    ```
    Explain your reasoning.
    ```

### *Phi-3.5* 모델과 채팅

1. **설정** 창에서 *Phi-3.5* 모델을 선택합니다.
1. 이전에 gpt-4 모델을 테스트할 때 사용한 것과 동일한 프롬프트를 반복하기 전에 새 채팅 세션이 시작되었는지 확인합니다.
1. 채팅창에 다음 쿼리를 입력합니다.

    ```
    I have a fox, a chicken, and a bag of grain that I need to take over a river in a boat. I can only take one thing at a time. If I leave the chicken and the grain unattended, the chicken will eat the grain. If I leave the fox and the chicken unattended, the fox will eat the chicken. How can I get all three things across the river without anything being eaten?
    ```

1. 응답을 봅니다. 그런 다음 다음의 후속 쿼리를 입력합니다.

    ```
    Explain your reasoning.
    ```

### 추가 비교 수행

1. 아래 퍼즐을 두 모델에서 모두 시도해 보고, 각 모델에게 추론 과정을 설명하도록 요청합니다(올바른 답변은 40!입니다).

    ```
    I have 53 socks in my drawer: 21 identical blue, 15 identical black and 17 identical red. The lights are out, and it is completely dark. How many socks must I take out to make 100 percent certain I have at least one pair of black socks?
    ```

## 모델에 대한 고찰

적절한 응답을 생성하는 능력과 비용 측면에서 차이가 있을 수 있는 두 가지 모델을 비교했습니다. 모든 생성형 시나리오에서 수행해야 하는 작업에 대한 적합성과 처리해야 할 것으로 예상되는 요청 수에 대한 모델 사용 비용 간의 적절한 균형을 갖춘 모델을 찾아야 합니다.

모델 카탈로그에 제공되는 세부 정보와 벤치마크는 모델을 시각적으로 비교할 수 있는 기능과 함께 생성형 AI 솔루션의 후보 모델을 식별할 때 유용한 출발점을 제공합니다. 그런 다음 채팅 플레이그라운드에서 다양한 시스템 및 사용자 프롬프트를 사용하여 후보 모델을 테스트할 수 있습니다.

## 정리

Azure AI Foundry 포털 탐색을 완료한 경우 불필요한 Azure 비용이 발생하지 않도록 이 연습에서 만든 리소스를 삭제해야 합니다.

1. [Azure Portal](https://portal.azure.com)을 열고 이 연습에 사용된 리소스를 배포한 리소스 그룹의 내용을 확인합니다.
1. 도구 모음에서 **리소스 그룹 삭제**를 선택합니다.
1. 리소스 그룹 이름을 입력하고 삭제할 것인지 확인합니다.
